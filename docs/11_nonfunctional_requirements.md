# Tsunagu 非機能要件（NFR）

## 1. パフォーマンスとスケーラビリティ
- **応答時間目標**: Webインターフェースの応答時間P95 < 1.5秒、API応答時間 < 800ms（標準操作）、AI推論操作 < 5秒。合成トランザクションと実ユーザー監視（RUM）ツールによる継続監視で測定。
- **処理スループット**: システムは1,000同時ユーザー、1分あたり100応募提出、1分あたり50支払取引、1秒あたり10AI推論操作を処理するように設計。k6やLocustなどのツールで四半期ごとに負荷テストを実施。
- **スケーリング戦略**: CPU使用率とリクエストキューの深さに基づくフロントエンドとバックエンドサービスのオートスケーリングを実装。オフピーク時間にスケジュールされたAIモデル再トレーニングのためのバッチ処理ジョブを専用コンピュートリソースで実行。

## 2. 可用性と信頼性
- **可用性SLO/SLA**: システム可用性SLO 99.9%（月間43.2分のダウンタイム）、顧客へのSLA約束99.5%。アップタイムロボットとアプリケーションパフォーマンス監視ツールによる監視。
- **フェイルオーバー/災害復旧**: AWS東京リージョンをプライマリ、大阪をセカンダリにデプロイ。データベース、アプリケーションサーバー、CDNの自動フェイルオーバーメカニズム。回復時間目標（RTO）4時間、回復地点目標（RPO）1時間。
- **バックアップ/リストア手順**: 7日間保持の日次データベーススナップショット、クロスリージョンレプリケーションによるファイルストレージのバージョニング、90日間保持の重要なログ。すべての重要なシステムで月次リストアドリルを実施。

## 3. セキュリティとプライバシー
- **アクセス制御/RBAC**: 管理者、採用担当、面接官、外部エージェント、紹介者の5つの明確な役割によるロールベースアクセス制御とデータアクセスの属性ベースポリシー。エンタープライズSSOのためのSAML/OIDC統合とすべてのユーザーに必須のMFA。
- **データ暗号化と鍵管理**: データ保存時のAES-256暗号化、データ転送時のTLS 1.3、鍵管理のためのAWS KMS。エンタープライズプランでは顧客管理鍵をBYOK（Bring-Your-Own-Key）機能で利用可能。
- **監査ログと保持**: すべてのユーザー行動、システムイベント、データアクセスの包括的監査ログを最低30日間保持。改ざん防止メカニズムで暗号化された形式でログを保存し、コンプライアンスダッシュボードでアクセス可能。

## 4. コンプライアンスと法務
- **KYC/AML規制コンプライアンス**: 身份確認のためのProve/Liquid統合、政治的に暴露された人物（PEP）スクリーニング、制裁リストチェック。自動チェックが失敗した場合の手動レビューのための自動ワークフローと設定可能なしきい値。
- **労働法と商法コンプライアンス**: 労働基準法、雇用安保法、特定商取引法への遵守。禁止言語と必要な開示事項に対する求人投稿内容の自動チェック。
- **個人情報保護**: 年次第三者監査によるISO 27001/ISMSコンプライアンス。国際候補者向けのGDPRに準拠したプライバシーポリシーとデータ処理のオプトアウトメカニズム。30日以内のデータ主体権利履行。

## 5. 可観測性と監視
- **ログ/メトリクス/トレース標準化**: 分散トレーシングのためのOpenTelemetry実装、メトリクス収集のためのPrometheus、ログ集約のためのELKスタック。リクエストトレーシングのための相関IDによる標準化されたログ形式。
- **SLA/SLO監視ダッシュボード**: システムヘルス、APIパフォーマンス、ビジネスメトリクスを表示するリアルタイムダッシュボード。エスカレーションポリシーとインシデント対応手順によるSLA違反の自動アラート。
- **アラート設計と運用フロー**: 重大、警告、情報レベルのマルチティアードアラートシステム。オンコールローテーションとエスカレーションポリシーによる24/7インシデント対応のためのPagerDuty統合。

## 6. UXとアクセシビリティ
- **WCAGコンプライアンスと色覚考慮**: CI/CDパイプラインでの自動アクセシビリティテストによるWCAG 2.1 AAコンプライアンス。色覚バリアフリーのコントラスト比と重要な情報の代替視覚インジケーターで設計されたカラーパレット。
- **多言語サポートとローカライゼーション**: 日本語と英語の言語サポートと右から左への言語準備。グローバルチームのための日付、通貨、数字のロケール固有のフォーマットとタイムゾーン処理。
- **モバイル/レスポンシブ要件**: オフライン機能をサポートするプログレッシブWebアプリ（PWA）実装。20以上のデバイス組み合わせでテストされたレスポンシブデザインとモバイルネットワークのためのパフォーマンス予算。

## 7. 保守性と運用
- **コード品質基準**: フロントエンドのESLint/Prettier、コード品質メトリクスのためのSonarQube、バックエンドサービスの80%コードカバレッジ要件。自動依存関係更新でCI/CDパイプラインに統合されたセキュリティスキャン。
- **リリース手順と環境管理**: デプロイメントのためのArgoCDによるGitOpsワークフロー、ゼロダウンタイムリリースのためのブルーグリーンデプロイメント戦略、段階的ロールアウトのための機能フラグ。開発、ステージング、本番のための別環境。
- **サードパーティ依存関係更新ポリシー**: Dependabotによる月次依存関係スキャン、四半期ごとのセキュリティ評価、年次のベンダーデューデリジェンス。72時間以内に適用される重大セキュリティパッチと自動通知システム。

## 8. AI/ML固有の要件
- **AIモデルの説明責任と透明性**: モデル解釈性のためのLIME/SHAP統合とすべてのAI決定の監査証跡。信頼区間と不確実性定量化でAIスコアに寄与する主要要因を表示するユーザーインターフェース。
- **AIパフォーマンスレビューモデル精度**: 履歴採用データによるA/Bテストで検証された0.8以上のターゲットF1スコア。自動再トレーニングトリガーによるモデルドリフトの継続監視。
- **カルチャーマッチングモデルバイアス検出**: 人口統計的均等と機会均等メトリクスによるAI Fairness 360ツールキットを使用した定期的バイアス監査。バイアス緩和戦略によるエッジケースの人手レビュー。
- **スキルギャップ学習プランのパーソナライズ**: 四半期ごとの調査で測定されたパーソナライズされた学習推奨の80%のターゲットユーザー満足度。継続的改善のためのフィードバックループによるコンテンツ推奨エンジン。
- **AI面接官トレーニングの効果**: 前後評価による面接官評価スキルの20%のターゲット改善。シナリオベース学習と進捗追跡ダッシュボードによるインタラクティブトレーニングモジュール。

> すべての要件は `docs/08_requirements.md` と特定の数値目標および測定方法論で整合。チェックマークが付いた項目はテストと実装により検証済み。